
<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<title>Partyservice Kleinfeldt ‚Äì V24</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    body { font-family: sans-serif; background: #f6f6f6; padding: 20px; }
    h1, h2 { color: #444; }
    .block { background: white; border-radius: 10px; padding: 20px; margin-bottom: 20px; box-shadow: 0 0 6px rgba(0,0,0,0.1); }
    .auftrag { margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px; }
    .highlight { background: #d8f0da; border-radius: 5px; padding: 2px 6px; display: inline-block; margin: 2px 0; }
    button { margin-top: 10px; }
    label { display: block; margin-top: 10px; }
    input, select, textarea { padding: 5px; width: 100%; max-width: 400px; margin-top: 4px; }
    .speisen-container { margin-top: 10px; border-top: 1px solid #ccc; padding-top: 10px; }
    .beilagen-container { margin-top: 10px; }
    .small { font-size: 0.85em; color: #555; }
    @media print {
      button, input, select, textarea { display: none; }
      body { background: white; }
    }
  </style>
</head>
<body>
<h1>Auftrag erfassen (V24)</h1>
<div class="block">
<form id="auftragForm">
<label>Kundenname: <input id="kunde" required=""/></label>
<label>Lieferdatum: <input id="datum" required="" type="date"/></label>
<label>Uhrzeit: <input id="zeit" type="time"/></label>
<label>Lieferort: <input id="ort"/></label>
<label>Telefonnummer: <input id="telefon"/></label>
<label>Notizen: <textarea id="notizen" rows="2"></textarea></label>
<h2>Vorspeise</h2>
<label>
        Vorspeise w√§hlen:
        <select id="vorspeise">
<option value="">Keine</option>
<option>Currywurst</option>
<option>Gulaschsuppe</option>
<option>Kartoffelsuppe mit W√ºrstchen</option>
<option>Kartoffelsuppe Vegetarisch</option>
<option>Lauch Hack Suppe</option>
<option>Chilli Con Carne</option>
<option>Chilli Sin Carne</option>
<option>Broccolicremesuppe</option>
</select>
</label>
<label>Personenanzahl Vorspeise: <input id="vorspeisePersonen" min="0" type="number"/></label>
<label><input id="vorspeiseBrot" type="checkbox"/> Brot dazu?</label>
<div id="speisenWrapper"></div>
<button onclick="addSpeise()" type="button">+ Speise/Beilage hinzuf√ºgen</button><br/><br/>
<button type="submit">‚úî Auftrag speichern</button>
</form>
</div>
<h2>Auftrags√ºbersicht</h2>
<div class="block" id="liste"></div>
<script>
    let auftraege = [];

    const HAUPTSPEISEN = [
      "Spanferkel", "BBQ Spanferkel", "Honigschinken", "Grillschinken", "Glasierte Pute",
      "Rinderbraten", "Kr√§uterbraten", "Gyrosbraten", "Griechischer Rahmbraten", "Spie√übraten",
      "Altdeutscher Bierbraten", "Schweinefilet in Sahnesauce", "Kassler im Bl√§tterteig",
      "Bayrischer Leberk√§se", "Gr√ºnkohl", "Wildschweinbraten", "Amerikanische Knabbereien", "Pulled Pork"
    ];

    const BEILAGEN = [
      "Kartoffelp√ºree", "Kartoffelgratin", "Bratkartoffeln", "R√∂stkartoffeln", "Kartoffelspalten", "Salzkartoffeln", "Reis",
      "Bunte Gem√ºseauswahl", "Rotkohl", "geschmortes Kraut",
      "Wei√ükrautsalat Natur", "Wei√ükrautsalat mit Yogurt angemacht", "frischer gemischter Salat",
      "Eisberg-Melonen Salat", "Griechischer Salat", "Kartoffelsalat", "Speckkartoffelsalat", "Nudelsalat"
    ];

    function addSpeise() {
      const div = document.createElement("div");
      div.className = "speisen-container";
      div.innerHTML = `
        <label>Hauptspeise:
          <select name="speise">
            ${HAUPTSPEISEN.map(s => `<option>${s}</option>`).join("")}
          </select>
        </label>
        <label>Personen: <input type="number" min="1" name="personen" value="1"></label>
        <div class="beilagen-container">
          <label>Beilage:
            <select name="beilage">
<optgroup label="Kartoffelbeilagen">
  <option>Kartoffelp√ºree</option>
  <option>Kartoffelgratin</option>
  <option>Bratkartoffeln</option>
  <option>R√∂stkartoffeln</option>
  <option>Kartoffelspalten</option>
  <option>Salzkartoffeln</option>
  <option>Reis</option>
</optgroup>
<optgroup label="Gem√ºse">
  <option>Bunte Gem√ºseauswahl</option>
  <option>Rotkohl</option>
  <option>geschmortes Kraut</option>
</optgroup>
<optgroup label="Salate">
  <option>Wei√ükrautsalat Natur</option>
  <option>Wei√ükrautsalat mit Yogurt angemacht</option>
  <option>frischer gemischter Salat</option>
  <option>Eisberg-Melonen Salat</option>
  <option>Griechischer Salat</option>
  <option>Kartoffelsalat</option>
  <option>Speckkartoffelsalat</option>
  <option>Nudelsalat</option>
</optgroup>
</select>
            <input type="number" min="1" name="beilagePersonen" placeholder="Personen">
          </label>
        </div>
        <button type="button" onclick="addBeilage(this)">+ weitere Beilage</button>
        <button type="button" onclick="this.parentElement.remove()">üóëÔ∏è Speise l√∂schen</button>
      `;
      document.getElementById("speisenWrapper").appendChild(div);
    }

    function addBeilage(btn) {
      const block = btn.previousElementSibling;
      const div = document.createElement("div");
      div.innerHTML = `
        <label>Beilage:
          <select name="beilage">
<optgroup label="Kartoffelbeilagen">
  <option>Kartoffelp√ºree</option>
  <option>Kartoffelgratin</option>
  <option>Bratkartoffeln</option>
  <option>R√∂stkartoffeln</option>
  <option>Kartoffelspalten</option>
  <option>Salzkartoffeln</option>
  <option>Reis</option>
</optgroup>
<optgroup label="Gem√ºse">
  <option>Bunte Gem√ºseauswahl</option>
  <option>Rotkohl</option>
  <option>geschmortes Kraut</option>
</optgroup>
<optgroup label="Salate">
  <option>Wei√ükrautsalat Natur</option>
  <option>Wei√ükrautsalat mit Yogurt angemacht</option>
  <option>frischer gemischter Salat</option>
  <option>Eisberg-Melonen Salat</option>
  <option>Griechischer Salat</option>
  <option>Kartoffelsalat</option>
  <option>Speckkartoffelsalat</option>
  <option>Nudelsalat</option>
</optgroup>
</select>
          <input type="number" min="1" name="beilagePersonen" placeholder="Personen">
        </label>
      `;
      block.parentElement.insertBefore(div, btn);
    }

    function render() {
      const liste = document.getElementById("liste");
      liste.innerHTML = "";
      auftraege.sort((a, b) => new Date(a.datum + "T" + a.zeit) - new Date(b.datum + "T" + b.zeit));
      for (const a of auftraege) {
        const d = new Date(a.datum);
        const wochentag = d.toLocaleDateString("de-DE", { weekday: 'long' });
        const el = document.createElement("div");
        el.className = "auftrag";
        el.innerHTML = `
          <strong>${a.kunde}</strong> ‚Äì ${wochentag}, ${a.datum.split("-").reverse().join(".")} ${a.zeit}<br>
          Ort: ${a.ort}, Tel: ${a.telefon}<br>
          ${a.vorspeise ? `Vorspeise: ${a.vorspeise} f√ºr ${a.vorspeisePersonen} Pers. (${(a.vorspeisePersonen * 0.5).toFixed(1)}l)` : ""}
          ${a.vorspeiseBrot ? `+ ${Math.ceil(a.vorspeisePersonen / 6)} Brot(e)` : ""}<br>
          ${a.speisen.map(s => `
            <div style="margin-top:8px">
              üçΩÔ∏è ${s.speise} f√ºr ${s.personen} Pers. (${s.speise.includes("Spanferkel") ? s.personen*650 : 250*s.personen}g Fleisch)<br>
              Beilagen:<br>
              ${s.beilagen.map(b => {
                const menge = b.name.toLowerCase().includes("kraut") ? 150 : 250;
                return `<span class="highlight">${b.name}: ${b.personen * menge}g</span>`;
              }).join(" ")}
            </div>
          `).join("")}
          <br>üìù Notiz: ${a.notizen || "-"}
        `;
        liste.appendChild(el);
      }
    }

    document.getElementById("auftragForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const speisenDOM = document.querySelectorAll(".speisen-container");
      const speisen = [];
      for (const s of speisenDOM) {
        const speise = s.querySelector("select[name='speise']").value;
        const personen = parseInt(s.querySelector("input[name='personen']").value);
        const beilagenDOM = s.querySelectorAll("select[name='beilage']");
        const beilagePersonen = s.querySelectorAll("input[name='beilagePersonen']");
        const beilagen = [];
        beilagenDOM.forEach((b, i) => {
          beilagen.push({ name: b.value, personen: parseInt(beilagePersonen[i].value) });
        });
        speisen.push({ speise, personen, beilagen });
      }

      auftraege.push({
        kunde: document.getElementById("kunde").value,
        datum: document.getElementById("datum").value,
        zeit: document.getElementById("zeit").value,
        ort: document.getElementById("ort").value,
        telefon: document.getElementById("telefon").value,
        notizen: document.getElementById("notizen").value,
        vorspeise: document.getElementById("vorspeise").value,
        vorspeisePersonen: parseInt(document.getElementById("vorspeisePersonen").value) || 0,
        vorspeiseBrot: document.getElementById("vorspeiseBrot").checked,
        speisen
      });

      this.reset();
      document.getElementById("speisenWrapper").innerHTML = "";
      render();
    });

    window.onload = () => addSpeise();
  
function removeBlock(button) {
    const block = button.closest('.dynamic-block');
    if (block) {
        block.remove();
    }
}
</script>
</body>
</html>
